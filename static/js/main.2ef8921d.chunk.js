(this["webpackJsonphk-independent-bus-eta"]=this["webpackJsonphk-independent-bus-eta"]||[]).push([[0],{102:function(t){t.exports=JSON.parse('{"en":{"translation":{"kmb":"KMB","ctb":"CTB","nwfb":"NWFB","\u5f80":"To","\u641c\u5c0b":"Search","\u53d6\u6d88":"Clear","\u5206\u9418":"min"}},"zh":{"translation":{"kmb":"\u4e5d\u5df4","ctb":"\u57ce\u5df4","nwfb":"\u65b0\u5df4"}}}')},113:function(t,e,n){},114:function(t,e,n){},129:function(t,e,n){"use strict";n.r(e);var r=n(0),a=n.n(r),c=n(17),o=n.n(c),s=(n(113),n(114),n(171)),i=n(103),u=n(10),b=n(21),l=n(170),d=n(161),h=n(131),j=n(74),f=n(172),p=n(154),O=n(42),x=n(153),g=n(175),m=n(174),v=n(155),k=n(6),y=n(178),C=n(12),S=n(38),w=n.n(S),z=n(88),I=n(52),T=n(23),_=n.n(T),L={co:"kmb",fetchRouteList:function(){return fetch("https://data.etabus.gov.hk/v1/transport/kmb/route/").then((function(t){return t.json()})).then((function(t){return t.data.reduce((function(t,e){return t[[e.route,e.service_type,e.bound].join("+")]={route:e.route,co:"kmb",bound:e.bound,orig:{en:e.orig_en,zh:e.orig_tc},dest:{en:e.dest_en,zh:e.dest_tc},stops:[],serviceType:e.service_type},t}),{})})).then((function(t){return fetch("https://data.etabus.gov.hk/v1/transport/kmb/route-stop/").then((function(t){return t.json()})).then((function(e){var n=e.data;e.generated_timestamp;return n.forEach((function(e){t[[e.route,e.service_type,e.bound].join("+")].stops.push(e.stop)})),Object.entries(t).map((function(t){var e=Object(C.a)(t,2);e[0];return e[1]}))}))}))},fetchStopList:function(){return fetch("https://data.etabus.gov.hk/v1/transport/kmb/stop").then((function(t){return t.json()})).then((function(t){var e=t.data,n=(t.generated_timestamp,{});return e.forEach((function(t){n[t.stop]={name:{en:t.name_en,zh:N(t.name_tc)},location:{lat:t.lat,long:t.long}}})),n}))},fetchEtas:function(t){var e=t.stopId,n=t.route,r=t.seq,a=t.serviceType,c=t.bound;return fetch("https://data.etabus.gov.hk/v1/transport/kmb/eta/".concat(e,"/").concat(n,"/").concat(a),{cache:"no-store"}).then((function(t){return t.json()})).then((function(t){return t.data.filter((function(t){return t.dir===c&&t.seq===r})).map((function(t){return{eta:t.eta?Math.round(_()(t.eta).diff(_()())/60/1e3):t.eta,remark:{zh:t.rmk_tc,en:t.rmk_en},co:"kmb"}}))}))}},N=function(t){return"\u761d\u55f5\u770e\ufffd\ud85e\ude3e\ufffd\ufffd\ufffd"===t?"\u6c99\u7530\u5773\u9053":"\u66ba\ufffd\u61ad\u627e\ufffd\u55f5\ufffd\ufffd"===t?"\u9ec3\u5927\u4ed9\u7ad9":t},R={co:"nwfb",fetchRouteList:function(){return fetch("https://rt.data.gov.hk/v1/transport/citybus-nwfb/route/nwfb").then((function(t){return t.json()})).then((function(t){return t.data.reduce((function(t,e){return t.concat([{route:e.route,bound:"O",orig:{en:e.orig_en,zh:e.orig_tc},dest:{en:e.dest_en,zh:e.dest_tc},co:"nwfb",stops:null,serviceType:1},{route:e.route,bound:"I",orig:{en:e.dest_en,zh:e.dest_tc},dest:{en:e.orig_en,zh:e.orig_tc},co:"nwfb",stops:null,serviceType:1}])}),[])}))},fetchRouteStops:function(t){var e=t.route,n=t.bound,r=(t.routeList,"I"===n?"inbound":"outbound");return fetch("https://rt.data.gov.hk/v1/transport/citybus-nwfb/route-stop/NWFB/".concat(e,"/").concat(r)).then((function(t){return t.json()})).then((function(t){return t.data.map((function(t){return t.stop}))})).then((function(t){return Promise.all(t.map((function(t){return fetch("https://rt.data.gov.hk/v1/transport/citybus-nwfb/stop/".concat(t)).then((function(t){return t.json()})).then((function(e){var n=e.data;return{stopId:t,name:{zh:n.name_tc,en:n.name_en},location:{lat:n.lat,long:n.long}}}))}))).then((function(e){var n={};return e.forEach((function(t){return n[t.stopId]=t})),{routeStops:t,stopList:n,co:"nwfb"}}))}))},fetchEtas:function(t){var e=t.stopId,n=t.route,r=t.bound;return console.log(e,n,r),fetch("https://rt.data.gov.hk/v1/transport/batch/stop-eta/NWFB/".concat(e,"?lang=zh-hant"),{cache:"no-store"}).then((function(t){return t.json()})).then((function(t){return t.data.filter((function(t){return t.route===n&&t.dir===r&&t.eta})).map((function(t){return{eta:t.eta?Math.round(_()(t.eta).diff(_()())/60/1e3):t.eta,remark:{zh:t.rmk,en:t.rmk},co:"nwfb"}}))}))}},E={co:"ctb",fetchRouteList:function(){return fetch("https://rt.data.gov.hk/v1/transport/citybus-nwfb/route/ctb").then((function(t){return t.json()})).then((function(t){return t.data.reduce((function(t,e){return t.concat([{route:e.route,bound:"O",orig:{en:e.orig_en,zh:e.orig_tc},dest:{en:e.dest_en,zh:e.dest_tc},co:"ctb",stops:null,serviceType:1},{route:e.route,bound:"I",orig:{en:e.dest_en,zh:e.dest_tc},dest:{en:e.orig_en,zh:e.orig_tc},co:"ctb",stops:null,serviceType:1}])}),[])}))},fetchRouteStops:function(t){var e=t.route,n=t.bound,r=(t.routeList,"I"===n?"inbound":"outbound");return fetch("https://rt.data.gov.hk/v1/transport/citybus-nwfb/route-stop/CTB/".concat(e,"/").concat(r)).then((function(t){return t.json()})).then((function(t){return t.data.map((function(t){return t.stop}))})).then((function(t){return Promise.all(t.map((function(t){return fetch("https://rt.data.gov.hk/v1/transport/citybus-nwfb/stop/".concat(t)).then((function(t){return t.json()})).then((function(e){var n=e.data;return{stopId:t,name:{zh:n.name_tc,en:n.name_en},location:{lat:n.lat,long:n.long}}}))}))).then((function(e){var n={};return e.forEach((function(t){return n[t.stopId]=t})),console.log(n),{routeStops:t,stopList:n,co:"ctb"}}))}))},fetchEtas:function(t){var e=t.stopId,n=t.route,r=t.bound;return fetch("https://rt.data.gov.hk/v1/transport/batch/stop-eta/CTB/".concat(e,"?lang=zh-hant"),{cache:"no-store"}).then((function(t){return t.json()})).then((function(t){return t.data.filter((function(t){return t.route===n&&t.dir===r})).map((function(t){return{eta:t.eta?Math.round(_()(t.eta).diff(_()())/60/1e3):t.eta,remark:{zh:t.rmk,en:t.rmk},co:"ctb"}}))}))}},B=function(){var t=Object(I.a)(w.a.mark((function t(e){var n,r,a,c,o,s,i,u,b,l,d;return w.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=e.route,r=e.routeStops,a=e.bound,c=e.seq,o=e.serviceType,s=e.co,i=e.routeSize,u=[],b=Object(z.a)(s),t.prev=3,b.s();case 5:if((l=b.n()).done){t.next=31;break}if("kmb"!==(d=l.value)||!r.kmb){t.next=15;break}return t.t0=u,t.next=11,L.fetchEtas({route:n,stopId:r.kmb[c-1],seq:c===i?1e3:c,serviceType:o,bound:a[d]});case 11:t.t1=t.sent,u=t.t0.concat.call(t.t0,t.t1),t.next=29;break;case 15:if("ctb"!==d||!r.ctb){t.next=23;break}return t.t2=u,t.next=19,E.fetchEtas({stopId:r.ctb[c-1],route:n,bound:a[d]});case 19:t.t3=t.sent,u=t.t2.concat.call(t.t2,t.t3),t.next=29;break;case 23:if("nwfb"!==d||!r.nwfb){t.next=29;break}return t.t4=u,t.next=27,R.fetchEtas({stopId:r.nwfb[c-1],route:n,bound:a[d]});case 27:t.t5=t.sent,u=t.t4.concat.call(t.t4,t.t5);case 29:t.next=5;break;case 31:t.next=36;break;case 33:t.prev=33,t.t6=t.catch(3),b.e(t.t6);case 36:return t.prev=36,b.f(),t.finish(36);case 39:return t.abrupt("return",u.sort((function(t,e){return t.eta<e.eta?-1:1})).filter((function(t){return!Number.isInteger(t.eta)||t.eta>1})));case 40:case"end":return t.stop()}}),t,null,[[3,33,36,39]])})));return function(e){return t.apply(this,arguments)}}(),P=function(){var t=Object(I.a)(w.a.mark((function t(e){var n,r,a,c,o;return w.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.route,r=e.serviceType,a=e.bound,"kmb"!==(c=e.co)){t.next=5;break}o=L,t.next=15;break;case 5:if("nwfb"!==c){t.next=9;break}o=R,t.next=15;break;case 9:if("ctb"!==c){t.next=13;break}o=E,t.next=15;break;case 13:return console.error(c+" is not a valid company id"),t.abrupt("return",null);case 15:return t.next=17,o.fetchRouteStops({route:n,serviceType:r,bound:a});case 17:return t.abrupt("return",t.sent);case 18:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),D=function(t,e){return t.route===e.route&&t.co!==e.co&&["orig","dest"].map((function(n){var r=t[n].en.toUpperCase(),a=e[n].en.toUpperCase();return r.includes(a)||a.includes(r)})).includes(!0)},F=function(t){var e={route:t.route,co:[t.co],bound:{},orig:{en:t.orig.en,zh:t.orig.zh},dest:{en:t.dest.en,zh:t.dest.zh},stops:{},serviceType:t.serviceType};return e.stops[t.co]=t.stops,e.bound[t.co]=t.bound,e},W=n(2),J=a.a.createContext(),q=function(t){var e=Object(r.useState)(localStorage.getItem("schemaVersion")),n=Object(C.a)(e,2),a=n[0],c=n[1],o=Object(r.useState)(JSON.parse(localStorage.getItem("routeList"))),s=Object(C.a)(o,2),i=s[0],u=s[1],b=Object(r.useState)(JSON.parse(localStorage.getItem("stopList"))),l=Object(C.a)(b,2),d=l[0],h=l[1],j=Object(r.useState)(parseInt(localStorage.getItem("updateTime"))),f=Object(C.a)(j,2),p=f[0],O=f[1],x=Object(r.useState)(""),g=Object(C.a)(x,2),m=g[0],v=g[1],k=Object(r.useState)("1+1+I"),y=Object(C.a)(k,2),S=y[0],w=y[1],z=Object(r.useState)(localStorage.getItem("geoPermission")),I=Object(C.a)(z,2),T=I[0],_=I[1],N=Object(r.useState)([]),B=Object(C.a)(N,2),P=B[0],q=B[1],M=function(){Promise.all([L,R,E].map((function(t){return t.fetchRouteList()}))).then((function(t){var e,n,r={},a=t.reduce((function(t,e){return t.concat(e)})).sort((function(t,e){return t.route<e.route?-1:0}));for(e=0;e<a.length;++e)if(!a[e].imported){var c=F(a[e]);for(n=e+1;n<a.length&&a[e].route===a[n].route;++n)a[n].route.imported||D(a[e],a[n])&&(c.co.push(a[n].co),c.stops[a[n].co]=a[n].stops,c.bound[a[n].co]=a[n].bound,a[n].imported=!0);r["".concat(c.route,"+").concat(c.serviceType,"+").concat(c.orig.en,"+").concat(c.dest.en)]=c}var o=r;return r={},Object.entries(o).sort((function(t,e){return t[0]<e[0]?-1:1})).forEach((function(t){var e=Object(C.a)(t,2),n=e[0],a=e[1];r[n]=a})),r})).then((function(t){return H(t)})).then((function(){return L.fetchStopList().then((function(t){Y(t);var e=Date.now();O(e),localStorage.setItem("updateTime",e)}))}))};Object(r.useEffect)((function(){fetch("/hk-independent-bus-eta/schema-version.txt").then((function(t){return t.text()})).then((function(t){var e=!1;a!==t&&(c(t),localStorage.setItem("schemaVersion",t),e=!0),(e=e||null==i||null==d||null==p||p<Date.now()-6048e5)&&M()}))}),[]),Object(r.useEffect)((function(){q(V(m,i))}),[m,i]);var Y=function(t){localStorage.setItem("stopList",JSON.stringify(t)),h(t)},H=function(t){"function"===typeof t&&(t=t(i)),localStorage.setItem("routeList",JSON.stringify(t)),u(t)};return Object(W.jsx)(J.Provider,{value:{routeList:i,updateRouteList:H,stopList:d,updateStopList:Y,searchRoute:m,setSearchRoute:v,updateSearchRouteByButton:function(t){switch(t){case"b":v(m.slice(0,-1));break;case"-":v("");break;default:v(m+t)}},selectedRoute:S,setSelectedRoute:w,possibleChar:P,renewDb:M,schemaVersion:a,updateTime:p,geoPermission:T,updateGeoPermission:function(t){_(t),localStorage.setItem("geoPermission",t)}},children:t.children})},M=J,V=function(t,e){if(null==e)return[];var n={};return Object.entries(e).forEach((function(e){if(e[0].startsWith(t.toUpperCase())){var r=e[0].slice(t.length,t.length+1);n[r]=isNaN(n[r])?1:n[r]+1}})),Object.entries(n).map((function(t){return t[0]})).filter((function(t){return"+"!==t}))},Y=Object(p.a)((function(t){return{toolbar:{"& a":{color:"black",textDecoration:"none"},display:"flex",justifyContent:"space-between",zIndex:2*t.zIndex.drawer},searchRouteInput:{maxWidth:"50px","& input":{textAlign:"center"}}}})),H=Object(k.a)({root:{borderBottom:"none",minHeight:24},indicator:{backgroundColor:"transparent"}})(m.a),G=Object(k.a)((function(t){return{root:{textTransform:"none",minWidth:36,fontWeight:900,marginRight:t.spacing(0),fontSize:"15px",opacity:1,padding:"6px 6px"},selected:{"& > .MuiTab-wrapper":{color:"#3B3C45",backgroundColor:"#FEFBFA"}},wrapper:{color:"#3B3C45",borderRadius:"30px",padding:"2px 10px 0px 10px"}}}))((function(t){return Object(W.jsx)(v.a,Object(O.a)({disableRipple:!0},t))})),U=function(t){var e=Object(r.useContext)(M),n=e.searchRoute,a=e.setSearchRoute,c=Object(u.j)().path,o=Object(y.a)(),s=o.t,i=o.i18n,l=Y(),d=Object(u.h)(),h=Object(u.g)();return Object(W.jsxs)(x.a,{className:l.toolbar,children:[Object(W.jsxs)(b.b,{to:{pathname:"/".concat(i.language,"/search")},children:[Object(W.jsx)(j.a,{variant:"h6",children:"\u9999\u6e2f"}),Object(W.jsx)(j.a,{variant:"subtitle2",children:"\u7368\u7acb\u5df4\u58eb\u9810\u5831"})]}),Object(W.jsx)(g.a,{className:l.searchRouteInput,type:"text",value:n,placeholder:s("\u5df4\u58eb\u7dda"),onChange:function(t){return a(t.target.value)},disabled:c.includes("route")}),Object(W.jsxs)(H,{value:i.language,onChange:function(t,e){return n=e,h.replace(d.pathname.replace("/"+i.language+"/","/"+n+"/")),void i.changeLanguage(n);var n},children:[Object(W.jsx)(G,{value:"en",label:"En"}),Object(W.jsx)(G,{value:"zh",label:"\u7e41"})]})]})},$=n(158),A=n(159),K=n(160),X=n(81),Q=n(31),Z=n(156),tt=n(157),et=n(173),nt=n(132),rt=n(92),at=n.n(rt),ct=function(t){var e=t.k,n=t.handleClick,r=t.disabled,a=void 0!==r&&r,c=ut(),o=Object(y.a)().t;return Object(W.jsx)(Z.a,{size:"large",variant:"contained",className:c.button,onClick:function(){return n(e)},disabled:a,children:"b"===e?Object(W.jsx)(at.a,{}):"-"===e?o("\u53d6\u6d88"):e})},ot=function(){var t=Object(r.useContext)(M),e=t.searchRoute,n=t.updateSearchRouteByButton,a=t.possibleChar;return Object(W.jsx)(tt.a,{container:!0,spacing:0,children:"789456123-0b".split("").map((function(t){return Object(W.jsx)(tt.a,{item:!0,xs:4,children:Object(W.jsx)(ct,{k:t,handleClick:n,style:{fontSize:"0.6rem"},disabled:"b"===t&&""===e||!"b-".includes(t)&&!a.includes(t)||"-"===t&&""===e})},"input-"+t)}))})},st=function(){var t=Object(r.useContext)(M),e=t.updateSearchRouteByButton,n=t.possibleChar;return Object(W.jsx)(tt.a,{container:!0,spacing:1,children:n.filter((function(t){return isNaN(t)})).map((function(t){return Object(W.jsx)(tt.a,{item:!0,xs:12,children:Object(W.jsx)(ct,{k:t,handleClick:e})},"input-"+t)}))})},it=function(){var t=ut();return Object(W.jsxs)(et.a,{className:t.boxContainer,padding:0,children:[Object(W.jsx)(et.a,{className:t.numPadContainer,padding:0,children:Object(W.jsx)(ot,{})}),Object(W.jsx)(et.a,{className:t.alphabetPadContainer,padding:0,children:Object(W.jsx)(st,{})})]})},ut=Object(nt.a)((function(t){return{boxContainer:{display:"flex",flexDirection:"row",height:"180px",justifyContent:"space-around"},numPadContainer:{width:"60%"},alphabetPadContainer:{width:"20%",height:"100%",overflowX:"hidden",overflowY:"scroll"},button:{width:"100%",height:42,borderRadius:"unset"}}})),bt=a.a.memo((function(t){var e=t.data,n=t.index,r=t.style,a=Object(y.a)(),c=a.t,o=a.i18n,s=e.routeList[n],i=s[0].split("+").slice(0,2),u=Object(C.a)(i,2),l=u[0],d=u[1],h=jt();return Object(W.jsx)(b.b,{to:"/"+o.language+"/route/"+s[0],children:Object(W.jsx)($.a,{variant:"outlined",style:r,square:!0,children:Object(W.jsx)(A.a,{children:Object(W.jsxs)(K.a,{className:h.cardContent,children:[Object(W.jsx)(j.a,{variant:"h5",display:"inline",children:l}),Object(W.jsxs)(j.a,{variant:"caption",children:[" - ",s[1].co.map((function(t){return c(t)})).join("+")]}),Object(W.jsx)("br",{}),Object(W.jsxs)(j.a,{variant:"subtitle2",display:"inline",children:[c("\u5f80")," ",s[1].dest[o.language],"  "]}),Object(W.jsx)(j.a,{variant:"caption",children:d>="2"?c("\u7279\u5225\u73ed\u6b21"):"\u3000"})]})})},s[0])})}),X.b),lt=Object(Q.a)((function(t){return{routeList:t}})),dt=function(){var t=Object(r.useContext)(M),e=t.routeList,n=t.searchRoute,a=Object.entries(e).filter((function(t){return t[0].startsWith(n.toUpperCase())})),c=lt(a);return Object(W.jsx)(X.a,{height:358,itemCount:a.length,itemSize:69,width:"100%",itemData:c,children:bt})},ht=function(){return Object(W.jsxs)(W.Fragment,{children:[Object(W.jsx)(dt,{}),Object(W.jsx)("hr",{}),Object(W.jsx)(it,{})]})},jt=Object(p.a)((function(t){return{cardContent:{padding:"8px 16px"}}})),ft=n(177),pt=n(179),Ot=n(162),xt=function(){var t=Object(u.i)(),e=t.id,n=t.panel,a=Object(r.useState)(!1),c=Object(C.a)(a,2),o=c[0],s=c[1],i=Object(r.useContext)(M),b=i.routeList,l=i.stopList,h=i.updateRouteList,j=i.updateStopList,f=i.setSelectedRoute,p=b[e],x=p.route,g=p.serviceType,m=p.bound,v=p.stops,k=p.co,S=Object(y.a)().i18n,w=Object(u.g)(),z=Object(r.useRef)([]),I=function(t){return function(n,r){if(s(!!r&&t),r)return w.replace("/".concat(S.language,"/route/").concat(e,"/").concat(t)),void f("".concat(e,"/").concat(t))}};Object(r.useEffect)((function(){f("".concat(e)),k.filter((function(t){return null==v[t]})).length&&Promise.all(k.map((function(t){return null!==v[t]?null:P({route:x,serviceType:g,bound:m[t],co:t})})).filter((function(t){return t}))).then((function(t){var n={};t.forEach((function(t){n=Object(O.a)(Object(O.a)({},n),t.stopList)})),j(Object(O.a)(Object(O.a)({},l),n)),h((function(n){var r=JSON.parse(JSON.stringify(n));return t.forEach((function(t){return r[e].stops[t.co]=t.routeStops})),r}))})),parseInt(n)&&z.current[parseInt(n)]&&(s(parseInt(n)),z.current[parseInt(n)].scrollIntoView({behavior:"smooth",block:"nearest"}))}),[]);var T=yt();return null==v[k[0]]?Object(W.jsx)(et.a,{className:T.loadingContainer,children:Object(W.jsx)(d.a,{size:30})}):Object(W.jsx)(et.a,{className:T.boxContainer,children:v[k[0]].map((function(t,e){return Object(W.jsxs)(mt,{expanded:o===e,onChange:I(e),TransitionProps:{unmountOnExit:!0},ref:function(t){z.current[e]=t},children:[Object(W.jsx)(vt,{children:l[t].name[S.language]}),Object(W.jsx)(kt,{children:Object(W.jsx)(gt,{route:x,seq:e+1,routeStops:v,serviceType:g,bound:m,co:k,routeSize:v[k[0]].length})})]},"stop-"+e)}))})},gt=function(t){var e=t.route,n=t.routeStops,a=t.seq,c=t.bound,o=t.serviceType,s=t.co,i=t.routeSize,u=Object(y.a)(),b=u.t,l=u.i18n,h=Object(r.useState)(null),f=Object(C.a)(h,2),p=f[0],O=f[1],x=function(){(function(){var t=Object(I.a)(w.a.mark((function t(){return w.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=O,t.next=3,B({route:e,routeStops:n,seq:a,bound:c,serviceType:o,co:s,routeSize:i});case 3:t.t1=t.sent,(0,t.t0)(t.t1);case 5:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}})()()};if(Object(r.useEffect)((function(){x();var t=setInterval((function(){x()}),3e4);return function(){return clearInterval(t)}}),[]),null==p)return Object(W.jsx)(d.a,{size:20,style:{}});var g=function(t){var e="";switch(t){case null:break;case 0:e="- "+b("\u5206\u9418");break;default:e=t+" "+b("\u5206\u9418")}return e};return Object(W.jsx)("div",{children:0===p.length?b("\u66ab\u7121\u73ed\u6b21"):p.map((function(t,e){return Object(W.jsxs)(j.a,{variant:"subtitle1",children:[g(t.eta)," ",t.remark[l.language]?" - "+t.remark[l.language]:""," ",b(t.co)]},"route-".concat(e))}))})},mt=Object(k.a)({root:{border:"1px solid rgba(0, 0, 0, .125)",boxShadow:"none","&:not(:last-child)":{borderBottom:0},"&:before":{display:"none"},"&$expanded":{margin:"auto"}},expanded:{}})(ft.a),vt=Object(k.a)({root:{backgroundColor:"rgba(0, 0, 0, .03)",borderBottom:"1px solid rgba(0, 0, 0, .125)",marginBottom:-1,minHeight:56,"&$expanded":{minHeight:56}},content:{"&$expanded":{margin:"12px 0"}},expanded:{}})(pt.a),kt=Object(k.a)((function(t){return{root:{padding:t.spacing(2)}}}))(Ot.a),yt=Object(p.a)((function(t){return{boxContainer:{overflowY:"scroll"},loadingContainer:{display:"flex",justifyContent:"center"}}})),Ct=n(163),St=n(164),wt=n(165),zt=n(180),It=n(166),Tt=n(167),_t=n(176),Lt=n(93),Nt=n.n(Lt),Rt=n(94),Et=n.n(Rt),Bt=n(95),Pt=n.n(Bt),Dt=n(96),Ft=n.n(Dt),Wt=n(97),Jt=n.n(Wt),qt=function(){var t=Object(r.useContext)(M),e=t.schemaVersion,n=t.updateTime,a=t.geoPermission,c=t.updateGeoPermission,o=t.renewDb,s=Object(r.useState)(!1),i=Object(C.a)(s,2),u=i[0],b=i[1],l=Object(y.a)(),d=l.t,j=l.i18n,f=Mt();return Object(r.useEffect)((function(){b(!1)}),[n]),Object(W.jsxs)(h.a,{className:f.root,children:[Object(W.jsxs)(Ct.a,{children:[Object(W.jsxs)(St.a,{button:!0,onClick:function(){b(!0),o()},children:[Object(W.jsx)(wt.a,{children:Object(W.jsx)(zt.a,{children:Object(W.jsx)(Nt.a,{})})}),Object(W.jsx)(It.a,{primary:d("\u67b6\u69cb\u7248\u672c")+": "+e,secondary:d("\u66f4\u65b0\u6642\u9593\uff1a")+" "+_()(n).format("YYYY-MM-DD HH:mm:ss")})]}),Object(W.jsxs)(St.a,{button:!0,onClick:function(){"granted"===a?c("closed"):navigator.geolocation.getCurrentPosition((function(t){c("granted")}))},children:[Object(W.jsx)(wt.a,{children:Object(W.jsx)(zt.a,{children:"granted"===a?Object(W.jsx)(Et.a,{}):Object(W.jsx)(Pt.a,{})})}),Object(W.jsx)(It.a,{primary:d("\u5730\u7406\u4f4d\u7f6e\u5b9a\u4f4d\u529f\u80fd"),secondary:d("granted"===a?"\u958b\u555f":"\u95dc\u9589")})]}),Object(W.jsx)(Tt.a,{}),Object(W.jsxs)(St.a,{button:!0,component:"a",href:"https://donate.612fund.hk/".concat(j.language,"/"),target:"_blank",children:[Object(W.jsx)(wt.a,{children:Object(W.jsx)(zt.a,{children:Object(W.jsx)(Ft.a,{})})}),Object(W.jsx)(It.a,{primary:d("\u6350\u6b3e\u652f\u6301"),secondary:d("\u8acb\u6350\u6b3e\u5230 612 \u4eba\u9053\u652f\u63f4\u57fa\u91d1")})]}),Object(W.jsx)(Tt.a,{}),Object(W.jsxs)(St.a,{children:[Object(W.jsx)(wt.a,{children:Object(W.jsx)(zt.a,{children:Object(W.jsx)(Jt.a,{})})}),Object(W.jsx)(It.a,{primary:d("\u8cc7\u6599\u4f86\u6e90"),secondary:d("\u8cc7\u6599\u4e00\u7dda\u901a")+"  https://data.gov.hk"})]})]}),Object(W.jsx)(_t.a,{anchorOrigin:{vertical:"bottom",horizontal:"center"},open:u,message:d("\u8cc7\u6599\u66f4\u65b0\u4e2d...")})]})},Mt=Object(p.a)((function(t){return{root:{background:"white",height:"calc(100vh - 120px)"}}})),Vt=n(168),Yt=n(169),Ht=n(98),Gt=n.n(Ht),Ut=n(99),$t=n.n(Ut),At=n(100),Kt=n.n(At),Xt=function(){var t=Object(y.a)(),e=t.t,n=t.i18n,a=Object(u.h)(),c=Object(r.useContext)(M).selectedRoute;return Object(W.jsxs)(Vt.a,{value:a.pathname,showLabels:!0,children:[Object(W.jsx)(Yt.a,{label:e("\u641c\u5c0b"),component:b.b,to:"/".concat(n.language,"/search"),value:"/".concat(n.language,"/search"),icon:Object(W.jsx)(Gt.a,{})}),Object(W.jsx)(Yt.a,{label:c.split("+")[0],component:b.b,to:"/".concat(n.language,"/route/").concat(c),value:"/".concat(n.language,"/route/").concat(c),icon:Object(W.jsx)($t.a,{})}),Object(W.jsx)(Yt.a,{label:e("\u8a2d\u5b9a"),component:b.b,to:"/".concat(n.language,"/settings"),value:"/".concat(n.language,"/settings"),icon:Object(W.jsx)(Kt.a,{})})]})},Qt=n(101),Zt=function(){var t=Object(u.j)().path;return Object(W.jsxs)(u.d,{children:[Object(W.jsx)(u.b,{path:"".concat(t,"/route/:id/:panel?"),children:Object(W.jsx)(xt,{})}),Object(W.jsx)(u.b,{path:"".concat(t,"/settings"),children:Object(W.jsx)(qt,{})}),Object(W.jsx)(u.b,{path:"".concat(t,"/search"),children:Object(W.jsx)(ht,{})})]})},te=function(){var t=ne(),e=Object(r.useContext)(M),n=e.routeList,a=e.stopList;return null==n||null==a?Object(W.jsxs)(l.a,{maxWidth:"xs",disableGutters:!0,className:t.loadingContainer,children:[Object(W.jsx)(d.a,{size:40}),Object(W.jsx)("br",{}),Object(W.jsx)("br",{}),Object(W.jsx)(h.a,{className:t.loadingTextContainer,elevation:0,children:Object(W.jsx)(Qt.a,{date:Date.now()+2e4,renderer:function(t){var e=t.seconds;return t.completed?Object(W.jsx)(j.a,{variant:"subtitle2",align:"center",children:"\u4ecb\u9762\u958b\u555f\u4e2d..."}):Object(W.jsxs)(W.Fragment,{children:[Object(W.jsx)(j.a,{variant:"subtitle2",align:"center",children:"\u521d\u59cb\u8a2d\u5b9a..."}),Object(W.jsx)(j.a,{variant:"subtitle2",align:"center",children:"\u6b63\u5728\u66f4\u65b0\u5df4\u58eb\u8def\u7dda\u8cc7\u6599..."}),Object(W.jsxs)(j.a,{variant:"subtitle2",align:"center",children:["\u7d04\u9700",e,"\u79d2"]})]})}})})]}):Object(W.jsx)(s.a,{theme:ee,children:Object(W.jsx)(l.a,{maxWidth:"xs",disableGutters:!0,className:t.container,children:Object(W.jsxs)(b.a,{children:[Object(W.jsx)(u.b,{exact:!0,path:"/",children:Object(W.jsx)(u.a,{to:"/zh/search"})}),Object(W.jsxs)(u.b,{path:"/:lang",children:[Object(W.jsx)(f.a,{}),Object(W.jsx)(U,{}),Object(W.jsx)(Zt,{}),Object(W.jsx)(Xt,{})]})]})})})},ee=Object(i.a)({typography:{fontFamily:"Noto Sans TC, Chivo, sans-serif"},palette:{background:{default:"#ffff00"}}}),ne=Object(p.a)((function(t){return{container:{display:"flex",flexDirection:"column",justifyContent:"space-between",height:"100vh"},loadingContainer:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",height:"100vh"},loadingText:{}}})),re=function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,183)).then((function(e){var n=e.getCLS,r=e.getFID,a=e.getFCP,c=e.getLCP,o=e.getTTFB;n(t),r(t),a(t),c(t),o(t)}))},ae=n(82),ce=n(54),oe=n(102),se="en"===window.location.pathname.substr(1,2)?"en":"zh";ae.a.use(ce.e).init({resources:oe,whitelist:["en","zh"],lowerCaseLng:!0,lng:se,nsSeparator:!1,keySeparator:!1,debug:!1,interpolation:{escapeValue:!1}});ae.a;o.a.render(Object(W.jsx)(q,{children:Object(W.jsx)(te,{})}),document.getElementById("root")),re()}},[[129,1,2]]]);
//# sourceMappingURL=main.2ef8921d.chunk.js.map