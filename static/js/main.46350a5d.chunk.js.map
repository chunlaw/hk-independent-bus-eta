{"version":3,"sources":["AppContext.js","components/Header.js","components/RouteInputPad.js","components/RouteBoard.js","components/RouteEta.js","App.js","reportWebVitals.js","i18n.js","index.js"],"names":["AppContext","React","createContext","AppContextProvider","props","useState","routeList","setRouteList","stopList","setStopList","searchRoute","setSearchRoute","possibleChar","setPossibleChar","useEffect","fetchRouteList","then","_routeList","JSON","parse","localStorage","getItem","getPossibleChar","fetchStopList","_stopList","Provider","value","updateSearchRouteByButton","buttonValue","slice","children","a","moment","subtract","format","fetch","response","json","result","data","forEach","element","route","service_type","bound","orig","en","orig_en","zh","orig_tc","dest","dest_en","dest_tc","stops","push","stop","setItem","stringify","generated_timestamp","name","name_en","name_tc","location","lat","long","Object","entries","startsWith","toUpperCase","length","map","k","filter","useStyles","makeStyles","theme","tabsContainer","display","breakpoints","down","flexDirection","toolbar","justifyContent","zIndex","drawer","LanguageTabs","withStyles","root","borderBottom","minHeight","indicator","backgroundColor","Tabs","LanguageTab","textTransform","minWidth","fontWeight","marginRight","spacing","fontSize","opacity","padding","selected","color","wrapper","borderRadius","Tab","disableRipple","Header","useContext","path","useRouteMatch","useTranslation","t","i18n","classes","useLocation","history","useHistory","Toolbar","className","Typography","variant","Input","type","placeholder","onChange","e","target","disabled","includes","language","v","lang","replace","pathname","changeLanguage","label","KeyButton","handleClick","Button","button","onClick","RouteNumPad","Grid","container","split","item","xs","RouteAlphabetPad","isNaN","RouteInputPad","Box","boxContainer","numPadContainer","alphabetPadContainer","height","width","overflowX","overflowY","RouteRow","memo","index","style","to","Card","CardActionArea","CardContent","areEqual","createItemData","memorize","RouteList","targetRouteList","itemData","itemCount","itemSize","RouteBoard","background","RouteEta","id","useParams","stations","setStations","expanded","setExpanded","co","eta","dir","idx","panel","event","newExpanded","TransitionProps","unmountOnExit","stopId","serviceType","TimeReport","setEta","_eta","Math","trunc","diff","remark","rmk_tc","rmk_en","console","log","Accordion","border","boxShadow","margin","MuiAccordion","AccordionSummary","marginBottom","content","MuiAccordionSummary","AccordionDetails","MuiAccordionDetails","PageSwitch","App","navigator","geolocation","getCurrentPosition","position","coords","latitude","longitude","Theme","Container","maxWidth","disableGutters","exact","CssBaseline","createMuiTheme","typography","fontFamily","palette","default","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","DEFAULT_LANG","window","substr","use","initReactI18next","init","resources","whitelist","lowerCaseLng","lng","nsSeparator","keySeparator","debug","interpolation","escapeValue","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.46350a5d.chunk.js","sourcesContent":["import React, { useEffect, useState } from 'react'\nimport moment from 'moment'\n\nconst AppContext = React.createContext()\n\nexport const AppContextProvider = ( props ) => {\n  // route list & stop list & route-stop list\n  const [routeList, setRouteList] = useState(null)\n  const [stopList, setStopList] = useState(null)\n  // search route\n  const [searchRoute, setSearchRoute] = useState(\"\")\n\n  // possible Char for RouteInputPad\n  const [possibleChar, setPossibleChar] = useState([])\n  \n  useEffect(() => {\n    fetchRouteList().then(() => {\n      let _routeList = JSON.parse(localStorage.getItem('routeList'))\n      setRouteList(_routeList)\n      setPossibleChar(getPossibleChar('', _routeList))\n    })\n    fetchStopList().then(() => {\n      let _stopList = JSON.parse(localStorage.getItem('stopList'))\n      setStopList(_stopList)\n    }) \n  }, [])\n\n  useEffect(() => {\n    setPossibleChar(getPossibleChar(searchRoute, routeList))\n  }, [searchRoute, routeList])\n\n  const updateSearchRouteByButton = (buttonValue) => {\n    switch (buttonValue) {\n      case 'b': \n        setSearchRoute(searchRoute.slice(0,-1))\n        break\n      case '-':\n        setSearchRoute('')\n        break\n      default: \n        setSearchRoute(searchRoute+buttonValue)\n    }\n  }\n\n  return (\n    <AppContext.Provider value={{\n        routeList, setRouteList, stopList, setStopList,\n        searchRoute, setSearchRoute, updateSearchRouteByButton,\n        possibleChar\n      }}>\n      {props.children}\n    </AppContext.Provider>\n  )\n}\n\nexport default AppContext\n\nconst fetchRouteList = async () => {\n  if ( localStorage.getItem('routeList') == null || \n    localStorage.getItem('routeListDbTime') < moment().subtract(1, 'days').format(\"YYYY-MM-DDTHH:mm:ssZZ\")\n  ) {\n    // KMB\n    let routeList = {}\n    let response = await fetch(\"https://data.etabus.gov.hk/v1/transport/kmb/route/\")\n    let result = await response.json()\n    result.data.forEach(element => {\n      routeList[element.route+'+'+element.service_type+\"+\"+element.bound+'+kmb'] = {\n        orig: {\n          en: element.orig_en,\n          zh: element.orig_tc\n        },\n        dest: {\n          en: element.dest_en,\n          zh: element.dest_tc\n        },\n        stops: []\n      }\n    })\n    response = await fetch(\"https://data.etabus.gov.hk/v1/transport/kmb/route-stop/\")\n    result = await response.json()\n    result.data.forEach(element => {\n      routeList[element.route+'+'+element.service_type+'+'+element.bound+'+kmb'].stops.push(element.stop)\n    })\n    localStorage.setItem('routeList', JSON.stringify(routeList))\n    localStorage.setItem('routeListDbTime', result.generated_timestamp)\n  } \n}\n\nconst fetchStopList = async () => {\n  if ( localStorage.getItem('stopList') == null ||\n    localStorage.getItem('stopDbTime') < moment().subtract(1, 'days').format(\"YYYY-MM-DDTHH:mm:ssZZ\")\n  ) {\n    // KMB\n    let stopList = {}\n    const response = await fetch(\"https://data.etabus.gov.hk/v1/transport/kmb/stop\")\n    const result = await response.json()\n    result.data.forEach(element => {\n      stopList[element.stop] = {\n        name: {\n          en: element.name_en,\n          zh: element.name_tc\n        },\n        location: {\n          lat: element.lat,\n          long: element.long\n        }\n      }\n    })\n    localStorage.setItem('stopList', JSON.stringify(stopList))\n    localStorage.setItem('stopDbTime', result.generated_timestamp)\n  }\n}\n\nconst getPossibleChar = ( searchRoute, routeList ) => {\n  if ( routeList == null ) return []\n  let possibleChar = {}\n  Object.entries(routeList).forEach(route => {\n    if ( route[0].startsWith(searchRoute.toUpperCase()) ) {\n      possibleChar[route[0].slice(searchRoute.length, searchRoute.length+1)] = true\n    }\n  })\n  return Object.entries(possibleChar).map(k => k[0]).filter(k => k !== '+')\n}","import React, { useContext } from \"react\"\nimport {\n  Input,\n  Tabs,\n  Tab,\n  Toolbar,\n  Typography\n} from \"@material-ui/core\"\nimport { withStyles, makeStyles } from '@material-ui/core/styles'\nimport { useLocation, useHistory } from 'react-router-dom'\nimport { useTranslation } from 'react-i18next'\nimport { useRouteMatch } from 'react-router-dom'\nimport AppContext from '../AppContext'\n\nconst Header = (props) => {\n  const { searchRoute, setSearchRoute } = useContext( AppContext )\n  \n  const { path } = useRouteMatch()\n  const { t, i18n } = useTranslation()\n  const classes = useStyles()\n  let location = useLocation()\n  const history = useHistory()\n\n  const handleLanguageChange = lang => {\n    history.replace( location.pathname.replace('/'+i18n.language+'/', '/'+lang+'/') )\n    i18n.changeLanguage(lang)\n  }\n\n  return (\n    <Toolbar\n      className={classes.toolbar}\n    >\n      <div>\n        <Typography variant=\"h6\">香港</Typography>\n        <Typography variant='subtitle2'>獨立巴士預報</Typography>\n      </div>\n      <Input \n        type=\"text\"\n        value={searchRoute}\n        placeholder={t('搜尋巴士線')}\n        onChange={e => setSearchRoute(e.target.value)}\n        disabled={path.includes('route')}\n      />\n      <div\n        className={classes.tabsContainer}\n      >\n        <LanguageTabs\n            value={i18n.language}\n            onChange={(e, v) => handleLanguageChange(v)}\n          >\n          <LanguageTab value=\"en\" label=\"En\" />\n          <LanguageTab value=\"zh\" label=\"繁\" />\n        </LanguageTabs>\n      </div>\n    </Toolbar>\n  );\n}\n\nconst useStyles = makeStyles(theme => ({\n  tabsContainer: {\n    display: 'flex',\n    [theme.breakpoints.down('sm')]:{\n      flexDirection: \"row-reverse\"\n    }\n  },\n  toolbar: {\n    display: 'flex',\n    justifyContent: 'space-between',\n    zIndex: theme.zIndex.drawer * 2\n  }\n}))\n\nconst LanguageTabs = withStyles({\n  root: {\n    borderBottom: 'none',\n    minHeight: 24\n  },\n  indicator: {\n    backgroundColor: 'transparent'\n  }\n})(Tabs);\n\nconst LanguageTab = withStyles((theme) => ({\n  root: {\n    textTransform: 'none',\n    minWidth: 36,\n    fontWeight: 900,\n    marginRight: theme.spacing(0),\n    fontSize: '15px',\n    opacity: 1,\n    padding: '6px 6px'\n  },\n  selected:{\n    '& > .MuiTab-wrapper':{\n      color: '#3B3C45',\n      backgroundColor: '#FEFBFA'\n    }\n  },\n  wrapper: {\n    color: '#3B3C45',\n    borderRadius: '30px',\n    padding: '2px 10px 0px 10px'\n  },\n}))((props) => <Tab disableRipple {...props} />);\n\nexport default Header;","import React, { useContext } from 'react'\nimport { \n  Box,\n  Button,\n  Grid\n} from '@material-ui/core'\nimport {\n  makeStyles\n} from '@material-ui/styles'\nimport BackspaceOutlinedIcon from '@material-ui/icons/BackspaceOutlined';\n\nimport AppContext from '../AppContext'\nimport { useTranslation } from 'react-i18next';\n\nconst KeyButton = ({k, handleClick, disabled = false}) => {\n  const classes = useStyles()\n  const { t } = useTranslation()\n  return (\n    <Button \n      variant=\"contained\" \n      className={classes.button}\n      onClick={() => handleClick(k)}\n      disabled={disabled}\n    >\n      {k === 'b' ? <BackspaceOutlinedIcon/> : \n        k === '-' ? t('取消') : k}\n    </Button>\n  )\n}\n\nconst RouteNumPad = () => {\n  const { searchRoute, updateSearchRouteByButton, possibleChar } = useContext( AppContext )\n\n  return (\n    <Grid container spacing={1}>\n    {\n      '789456123-0b'.split('').map( k => (\n        <Grid item xs={4} key={'input-'+k}>\n          <KeyButton\n            k={k}\n            handleClick={updateSearchRouteByButton}\n            disabled={\n              (k === 'b' && searchRoute === '') \n              || ( !'b-'.includes(k) && !possibleChar.includes(k))\n              || ( k === '-' && searchRoute === '' )\n            }\n          />\n        </Grid>\n      ))\n    }\n    </Grid>\n  )\n}\n\nconst RouteAlphabetPad = () => {\n  const { updateSearchRouteByButton, possibleChar } = useContext( AppContext )\n  \n  return (\n    <Grid container spacing={1}>\n      {\n        possibleChar.filter(k => isNaN(k)).map(k => (\n          <Grid item xs={12} key={'input-'+k}>\n            <KeyButton\n              k={k}\n              handleClick={updateSearchRouteByButton}\n            />\n          </Grid>\n        )) \n      }\n    </Grid>\n  )\n}\n\nconst RouteInputPad = () => {\n\n  const classes = useStyles()\n  const padding = 0\n\n  return (\n    <Box className={classes.boxContainer} padding={padding}>\n      <Box className={classes.numPadContainer} padding={padding}>\n        <RouteNumPad />\n      </Box>\n      <Box className={classes.alphabetPadContainer} padding={padding}>\n        <RouteAlphabetPad />\n      </Box>\n    </Box>\n  )\n}\n\nexport default RouteInputPad\n\nconst useStyles = makeStyles(theme => ({\n  boxContainer: {\n    display: 'flex',\n    flexDirection: 'row',\n    height: '180px',\n    justifyContent: 'space-around'\n  },\n  numPadContainer: {\n    width: '60%',\n  },\n  alphabetPadContainer: {\n    width: '20%',\n    height: '100%',\n    overflowX: 'hidden',\n    overflowY: 'scroll'\n  },\n  button: {\n    width: '100%'\n  }\n}))","import React, { useContext } from 'react'\nimport {\n  Card,\n  CardActionArea,\n  CardContent,\n  Container,\n  Typography\n} from '@material-ui/core'\nimport {\n  makeStyles\n} from '@material-ui/styles'\nimport AppContext from '../AppContext'\nimport { useTranslation } from 'react-i18next'\nimport { FixedSizeList as List, areEqual } from 'react-window'\nimport memorize from 'memoize-one'\nimport RouteInputPad from './RouteInputPad'\nimport { Link } from  'react-router-dom'\n\nconst RouteRow = React.memo(( {data, index, style} ) => {\n  const { i18n } = useTranslation()\n  const { routeList } = data\n  const route = routeList[index]\n  \n  return (\n    <Link to={'/'+i18n.language+'/route/'+route[0]}>\n      <Card variant=\"outlined\" key={route[0]} style={style}>\n        <CardActionArea>\n          <CardContent>\n            <Typography variant=\"h5\">{route[0].replace(/\\+.*/, '')}</Typography>\n            <Typography variant=\"subtitle2\">{route[1].orig[i18n.language]} ➔ {route[1].dest[i18n.language]}</Typography>\n          </CardContent>\n        </CardActionArea>\n      </Card>\n    </Link>\n  )\n}, areEqual)\n\nconst createItemData = memorize((routeList) => ({routeList}))\n\nconst RouteList = () => {\n  const { routeList, searchRoute } = useContext(AppContext)\n  const targetRouteList = Object.entries(routeList).filter(\n    element => element[0].startsWith(searchRoute.toUpperCase())\n  ) \n\n  const itemData = createItemData(targetRouteList)\n  return (\n    <List\n      height={300}\n      itemCount={targetRouteList.length}\n      itemSize={85}\n      width=\"100%\"\n      itemData={itemData}\n    >\n        {RouteRow}\n    </List>\n  )\n}\n\nconst RouteBoard = () => {\n  const classes = useStyles()\n\n  return (\n    <>\n      <RouteList />\n      <hr/>\n      <RouteInputPad />\n    </>\n  )\n}\n\nexport default RouteBoard\n\nconst useStyles = makeStyles(theme => ({\n  container: {\n    background: 'white'\n  }\n}))","import React, { useState, useEffect, useContext } from 'react'\nimport { useParams } from 'react-router-dom'\nimport MuiAccordion from'@material-ui/core/Accordion'\nimport MuiAccordionSummary from'@material-ui/core/AccordionSummary'\nimport MuiAccordionDetails from'@material-ui/core/AccordionDetails'\nimport {\n  Box, Typography\n} from '@material-ui/core'\nimport { withStyles } from '@material-ui/core/styles'\nimport AppContext from '../AppContext'\nimport moment from 'moment'\nimport { useTranslation } from 'react-i18next'\n\nconst RouteEta = () => {\n  const { id } = useParams()\n  const [ stations, setStations ] = useState(null)\n  const [ expanded, setExpanded ] = useState(false)\n  const { routeList, stopList } = useContext ( AppContext )\n  const [route, service_type, bound, co] = id.split('+')\n\n  useEffect (async () => {\n    if ( co === 'kmb' ) {\n      const response = await fetch(`https://data.etabus.gov.hk/v1/transport/kmb/route-eta/${route}/${service_type}`)\n      const result = await response.json()\n      setStations(result.data.filter(eta => eta.dir === bound))\n    }\n  }, [])\n  if ( stations === null ) {\n    return (\n      <div>Loading</div>\n    )\n  }\n  const handleChange = ( panel ) => (event, newExpanded) => {\n    setExpanded(newExpanded ? panel : false)\n  } \n\n  return (\n    <Box>\n      {\n        routeList[id].stops.map((stop, idx) => (\n          <Accordion \n            key={'stop-'+idx} \n            expanded={expanded === idx}\n            onChange={handleChange(idx)}\n            TransitionProps={{unmountOnExit: true}}\n          >\n            <AccordionSummary>{stopList[stop].name.zh}</AccordionSummary>\n            <AccordionDetails>\n              <TimeReport \n                route={route}\n                stopId={stop}\n                serviceType={service_type}\n              />\n            </AccordionDetails>\n          </Accordion>\n        ))\n      }\n    </Box>\n  )\n}\n\nexport default RouteEta\n\nconst TimeReport = ( props ) => {\n  const { t, i18n } = useTranslation()\n  const [ eta, setEta ] = useState(null)\n  const { route, stopId, serviceType } = props\n  useEffect( async () => {\n    const response = await fetch(\n      `https://data.etabus.gov.hk/v1/transport/kmb/eta/${stopId}/${route}/${serviceType}`\n    )\n    const result = await response.json()\n    let _eta = []\n    result.data.forEach(e => {\n      _eta.push( {\n        eta: Math.trunc(moment(e.eta).diff(moment()) / 60 / 1000),\n        remark: {\n          zh: e.rmk_tc,\n          en: e.rmk_en\n        }\n      })\n    })\n    console.log(_eta)\n    setEta(_eta)\n  }, [])\n  if ( eta == null ) {\n    return (\n      <></>\n    )\n  }\n  console.log(eta)\n  return (\n    <div>\n      {\n        eta.length == 0 ? t('暫無班次') : (\n          eta.map(t => (\n            <Typography variant=\"subtitle1\">\n              {t.eta || '-'}分鐘 - {t.remark[i18n.language]}\n            </Typography>\n          ))\n        )\n      }\n    </div>\n  )\n}\n\nconst Accordion = withStyles({\n  root: {\n    border: '1px solid rgba(0, 0, 0, .125)',\n    boxShadow: 'none',\n    '&:not(:last-child)': {\n      borderBottom: 0,\n    },\n    '&:before': {\n      display: 'none',\n    },\n    '&$expanded': {\n      margin: 'auto',\n    },\n  },\n  expanded: {},\n})(MuiAccordion)\n\nconst AccordionSummary = withStyles({\n  root: {\n    backgroundColor: 'rgba(0, 0, 0, .03)',\n    borderBottom: '1px solid rgba(0, 0, 0, .125)',\n    marginBottom: -1,\n    minHeight: 56,\n    '&$expanded': {\n      minHeight: 56,\n    },\n  },\n  content: {\n    '&$expanded': {\n      margin: '12px 0',\n    },\n  },\n  expanded: {},\n})(MuiAccordionSummary);\n\nconst AccordionDetails = withStyles((theme) => ({\n  root: {\n    padding: theme.spacing(2),\n  },\n}))(MuiAccordionDetails);\n","import './App.css'\nimport { MuiThemeProvider, createMuiTheme } from '@material-ui/core/styles'\nimport React, { useContext } from 'react'\nimport {\n  BrowserRouter as Router,\n  Redirect,\n  Switch,\n  Route,\n  useRouteMatch\n} from \"react-router-dom\";\nimport {\n  Container,\n  CssBaseline\n} from '@material-ui/core'\nimport Header from './components/Header'\nimport RouteBoard from './components/RouteBoard'\nimport RouteEta from './components/RouteEta'\nimport AppContext from './AppContext'\n\nconst PageSwitch = () => {\n  const { path } = useRouteMatch()\n  return (\n    <Switch>\n      <Route path={`${path}/route/:id?`}>\n        <RouteEta />\n      </Route>\n      <Route >\n        <RouteBoard />\n      </Route>\n    </Switch>\n  )\n}\n\nconst App = () => {\n  navigator.geolocation.getCurrentPosition(position => {\n    console.log(position.coords.latitude, position.coords.longitude)\n  })\n  const { routeList } = useContext( AppContext )\n  if ( routeList == null ) {\n    return (\n      <>Loading</>\n    )\n  } \n  return (\n    <MuiThemeProvider theme={Theme}>\n      <Container maxWidth='xs' disableGutters>\n        <Router>\n          <Route exact path=\"/\">\n            <Redirect to=\"/zh/\" />\n          </Route>\n          <Route path=\"/:lang\">\n            <CssBaseline />\n            <Header />\n            <PageSwitch />\n          </Route>\n        </Router>\n      </Container>\n    </MuiThemeProvider>\n  );\n}\n\nexport default App;\n\nconst Theme = createMuiTheme({\n  typography: {\n    fontFamily: \"Noto Sans TC, Chivo, sans-serif\"\n  },\n  palette: {\n    background: {\n      default: \"yellow\"\n    }\n  }\n})\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import i18n from \"i18next\";\nimport { initReactI18next } from \"react-i18next\";\nimport resources from \"./i18n/translation.json\";\n\nconst DEFAULT_LANG = window.location.pathname.substr(1,2) === 'zh' ? 'zh' : 'en'\n\ni18n\n  .use(initReactI18next)\n  .init({\n    resources,\n    whitelist: ['en', 'zh'],\n    lowerCaseLng: true,\n    lng: DEFAULT_LANG,\n    nsSeparator: false,\n    keySeparator: false,\n    debug: false,\n\n    interpolation:{\n      escapeValue: false\n    }\n  });\n\nexport default i18n;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\nimport { AppContextProvider } from './AppContext'\nimport './i18n'\n\nReactDOM.render(\n  <React.StrictMode>\n    <AppContextProvider>\n      <App />\n    </AppContextProvider>\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}